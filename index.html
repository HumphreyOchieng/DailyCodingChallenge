<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119404708-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-119404708-1');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1">
    <meta name="description" content="">
    <title>Daily JavaScript Problem</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:600,700,800|Open+Sans:400,600,700" rel="stylesheet">
    <link href="styles/main.css" type="text/css" rel="stylesheet" />
    <link href="styles/prism.css" type="text/css" rel="stylesheet" />
    <link href="styles/linenumbers.css" type="text/css" rel="stylesheet" />
    <script src="https://checkout.stripe.com/checkout.js"></script>
    <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
</head>

<body>

<header class="header">
    <div class="logo">Daily JavaScript Problem</div>
</header>

<div class="home" id="home">
    <h3 class="home__title">Land the job of your dreams!</h3>
    <p class="home__body">
        Receive JavaScript coding problems asked by interviewers every day and handpicked remote
        job offers from companies around the world every week.
    </p>
    <form name="subscriptionForm" class="signup" method="post" >
        <input type="email" class="signup__input" placeholder="yourname@example.com" />
        <input type="submit" class="signup__btn" value="Sign up for free" />
        <div class="signup__notice">No spam, ever.</div>
    </form>
</div>

<div class="example">
    <h3 class="example__title">Example</h3>
    <p class="example__body">What output does the following code produce?</p>
    <pre class="line-numbers">
        <code class="language-javascript">
            const array = [19, 32, 5];
            for (var index = 0; index < array.length; ++index) {
                setTimeout(function() {
                    console.log('Index: ' + index + ', value: ' + array[index]);
                }, 3000);
            }
        </code>
    </pre>
    <p class="example__body">
        Try to solve it on your own first. 
    </p>

    <h3 class="example__title">Solution</h3>
    <p class="example__body">
        The console output after a while is shown below.
    </p>
    <pre>
        <code class="language-javascript">
            "Index: 3, value: undefined"
            "Index: 3, value: undefined"
            "Index: 3, value: undefined"
        </code>
    </pre>
    <p class="example__body">
        Before we dive into the explanation, add <code class="language-javascript">console.log(index);</code> inside the for loop to log each of its iterations. The new results are shown below.
    </p>
    <pre>
        <code class="language-javascript">
            0
            1
            2
            "Index: 3, value: undefined"
            "Index: 3, value: undefined"
            "Index: 3, value: undefined"
        </code>
    </pre>
    <p class="example__body">
        From the first set of logs (0, 1, 2), we can tell that the loop ran 3 times. At the end of the third loop, the value of index (2) is incremented by 1 and compared to the length of the array (3). Since 3 is not less than 3, the loop condition evaluates to false.
    </p>
    <p class="example__body">
        setTimeout() is called in each iteration of the loop and takes two parameters, a function and a number representing the time in milliseconds to wait before executing the function. The local scope of a variable declared using the var keyword is limited only by the function it's declared in so the scope of the index variable extends beyond the for loop block statement. When the delayed functions run, the index variable is still in scope and so all functions reference the same variable which evaluates to 3. At this point, we've looped through all array elements so array[3] returns undefined. How would we print the array's elements after a delay? One possible solution involves ES6 syntax.
    </p>
    <pre class="line-numbers">
        <code class="language-javascript">
            const array = [19, 32, 5];
            for (let index = 0; index < array.length; ++index) {
                setTimeout(function() {
                    console.log('Index: ' + index + ', value: ' + array[index]);
                }, 3000);
            }
        </code>
    </pre>
    <p class="example__body">
        We've only changed how we declare index, from var to let. The difference now is that on every iteration of the for loop, a new scope is created. The functions in setTimout() use the variable index so to be able to execute successfully after the delay, the scope needs to be preserved. This happens on all 3 iterations so each function references a different preserved scope. This is the basic idea behind closures. When the functions execute, they reference the closures created and print out the elements of the array in order.
    </p>
    <pre>
        <code class="language-javascript">
            0
            1
            2
            "Index: 0, value: 19"
            "Index: 1, value: 32"
            "Index: 2, value: 5"
        </code>
    </pre>
</div>

<div class="plans">
    <div class="plans__title">Receiving daily problems is free forever!</div>
    <div class="plans__body">
        <div class="plan">
            <p class="plan__tier">Intern</p>
            <p class="plan__price">$0<span class="plan__cycle">/forever</span></p>
            <p class="plan__features-title">Features</p>
            <ul class="plan__features">
                <li class="plan__feature">One problem every day</li>
                <li class="plan__feature">No solutions</li>
                <li class="plan__feature">No ads</li>
                <li class="plan__feature">.</li>
            </ul>
            <p class="plan__billing">No billing. Quit anytime.</p>
            <button class="plan__signup" id="tier1Button">Subscribe for free</button>
            <p class="plan__notice"></p>
        </div>
        <div class="plan plan--ideal" method="POST">
            <!-- <p class="plan__title">Most popular</p> -->
            <p class="plan__tier">Developer</p>
            <p class="plan__price plan__price--ideal">$9<span class="plan__cycle">/mo</span></p>
            <p class="plan__features-title">Features</p>
            <ul class="plan__features">
                <li class="plan__feature">One problem every day</li>
                <li class="plan__feature">Guided solution every day</li>
                <li class="plan__feature">No ads</li>
                <li class="plan__feature">.</li>
            </ul>
            <p class="plan__billing">Automatic monthly billing. Quit anytime.</p>
            <button class="plan__signup plan__signup--ideal" id="tier2Button">Subscribe for $9</button>          
            <p class="plan__notice"></p>
        </div>
        <div class="plan">
            <p class="plan__tier">Architect</p>
            <p class="plan__price">$14<span class="plan__cycle">/mo</span></p>
            <p class="plan__features-title">Features</p>
            <ul class="plan__features">
                <li class="plan__feature">One problem every day</li>
                <li class="plan__feature">Guided solution every day</li>
                <li class="plan__feature">10 handpicked coding interviews weekly</li>
                <li class="plan__feature">No ads</li>
            </ul>
            <p class="plan__billing">Automatic monthly billing. Quit anytime.</p>
            <button class="plan__signup" id="tier3Button">Subscribe for $14</button>
            <p class="plan__notice"></p>
        </div>
    </div>
</div>

<div class="faq">
    <h3 class="faq__title">Frequently Asked Questions</h3>
    <ol class="faq__body">
        <li class="faq__item">
            <p class="faq__question">Why JavaScript?</p>
            <p class="faq__answer">
                I chose JavaScript beacuse of its versatility and widespread adoption in commercial projects which means there are a lot of job opportunities. If you're interested in a similar service for Python developers, head on over to <a title="Go to Daily Coding Problems site" class="faq__link" href="www.dailycodingproblem.com">dailycodingproblems.com</a>
            </p>
        </li>
        <li class="faq__item">
            <p class="faq__question">Can I benefit from Daily JavaScript Problem?</p>
            <p class="faq__answer">
                If you're learning how to develop programs in JavaScript and/or looking for a remote position, then yes.
            </p>
        </li>
        <li class="faq__item">
            <p class="faq__question">How does Daily JavaScript Problem differ from similar offerings?</p>
            <p class="faq__answer">
                One, we focus solely on JavaScript. Two, we hand curate a selection of remote jobs every week that you can apply for so you get to spend more of your time on improving your skills and less time job hunting. 
            </p>
        </li>
        <li class="faq__item">
            <p class="faq__question">Can't I just look for job interviews on my own?</p>
            <p class="faq__answer">
                You could, but you probably won't. Spending 1-2 hours everyday scanning job sites and trying to identify posts you can apply for is tiresome and you'll probably end up procrastinating. That's also 7-14 hours every week or 28-56 hours every month that you won't get back so let me do it for you. I'm sure you'll find better ways to spend your time.
            </p>
        </li>
        <li class="faq__item">
            <p class="faq__question">Can I unsubscribe from Daily JavaScript Problem whenever I choose?</p>
            <p class="faq__answer">
                Yes. A link to unsubscribe from the service is included at the end of every email we send you.
            </p>
        </li>
        
    </ol>
</div>

<footer class="footer">
    <div class="copyright">Daily JavaScript Problem 2018</div>
    <div class="tos"><a href="./pages/tos.html">Terms Of Service</a></div>
    <div class="privacy"><a href="./pages/privacy.html">Privacy Statement</a></div>
</footer>

<form id="paymentForm" action="https://wt-c87a5eeb292d90f6b32cf269cc4b70ce-0.run.webtask.io/StripeBackend" method="POST" class="hidden" enctype="application/x-www-form-urlencoded">
    <input type="hidden" id="stripeToken" name="stripeToken"  />
    <input type="hidden" id="stripeEmail"  name="stripeEmail" />
    <input type="hidden" id="planAmount" name="planAmount" />
</form>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="scripts/prism.js"></script>
<script src="scripts/plugins/linenumbers.js"></script>
<script>
    var handler = StripeCheckout.configure ({
        key: 'pk_test_B71JqmlByKCwZFyJvUncyQcU',
        image: 'https://stripe.com/img/documentation/checkout/marketplace.png',
        locale: 'auto',
        token: function(token) {
            $('#stripeToken').val(token.id);
            $('#stripeEmail').val(token.email);
            var proxy = 'https://cors-anywhere.herokuapp.com/';
            var webtaskUrl = "https://wt-c87a5eeb292d90f6b32cf269cc4b70ce-0.sandbox.auth0-extend.com/StripeBackend";
            $.ajax({
                url : proxy + webtaskUrl,
                type : "POST",
                data : $("#paymentForm").serialize(),
                success : function (response){
                    if(response.results.status){
                        window.open('./pages/confirmation.html', '_self');
                    } else {
                        window.open('./pages/error.html', '_self');
                    }
                },
                error : function () {
                    window.open('./pages/error.html', '_self');
                }
            });
        }
    });

    $('#tier2Button').on('click', function(event) {
        document.getElementById('planAmount').value = 9;
        handler.open({
            name: 'Daily Javascript Problems',
            description: 'Developer Plan',
            amount: 900
        });
        e.preventDefault();
    });

    $('#tier3Button').on('click', function(event) {
        document.getElementById('planAmount').value = 14;
        handler.open({
            name: 'Daily Javascript Problems',
            description: 'Architect Plan',
            amount: 1400
        });
        e.preventDefault();
    });

    $('#tier1Button').on('click', function(){
        $('html, body').animate({
            scrollTop: ($('#home').offset().top)
        }, 200);
    });

    $('.signup__btn').on('click', function( event ){
        event.preventDefault();
        var eeUrl = 'https://api.elasticemail.com/v2/contact/add';
        $.post( eeUrl, {
            email : $('.signup__input').val(),
            publicAccountId : '199b5c02-90a4-4d21-a3e9-64d5b5870d4e',
            listName : 'Intern Plan'
        }, function( data ){
            alert('success');
            console.log( data );
            window.open('./pages/confirmation.html', '_self');
        }, 'json' )
        .fail( function() {
            alert('error');
            window.open('./pages/error.html', '_self');
        } );
    });

    $(window).on('popstate', function() {
        handler.close();
    });
</script>

</body>
</html>