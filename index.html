<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Daily Javascript Problem</title>
    <link href="styles/main.css" type="text/css" rel="stylesheet" />
    <link href="styles/prism.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://checkout.stripe.com/checkout.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
</head>

<body>

<header class="header">
    <div class="logo">Daily Javascript Problem</div>
</header>

<div class="home" id="home">
    <h3 class="home__title">Land the job of your dreams!</h3>
    <p class="home__body">
        Receive JavaScript coding problems asked by interviewers every day and handpicked remote
        job offers from companies around the world every week.
    </p>
    <form name="subscriptionForm" class="signup" method="post" >
        <input type="email" class="signup__input" placeholder="yourname@example.com" />
        <input type="submit" class="signup__btn" value="Sign up for free" />
        <div class="signup__notice">No spam, ever.</div>
    </form>
</div>

<div class="plans">
    <div class="plans__title">Receiving daily problems is free forever!</div>
    <div class="plans__body">
        <div class="plan">
            <p class="plan__tier">Intern</p>
            <p class="plan__price">$0</p>
            <p class="plan__features-title">Features</p>
            <ul class="plan__features">
                <li class="plan__feature">One problem every day</li>
                <li class="plan__feature">No solutions</li>
                <li class="plan__feature">No ads</li>
                <li class="plan__feature">.</li>
            </ul>
            <p class="plan__billing">No billing. Quit anytime.</p>
            <button class="plan__signup" id="tier1Button">Sign up for free</button>
            <p class="plan__notice"></p>
        </div>
        <div class="plan plan--ideal" method="POST">
            <!-- <p class="plan__title">Most popular</p> -->
            <p class="plan__tier">Developer</p>
            <p class="plan__price plan__price--ideal">$9</p>
            <p class="plan__features-title">Features</p>
            <ul class="plan__features">
                <li class="plan__feature">One problem every day</li>
                <li class="plan__feature">Guided solutions every day</li>
                <li class="plan__feature">3 handpicked coding interviews weekly</li>
                <li class="plan__feature">No ads</li>
            </ul>
            <p class="plan__billing">Automatic monthly billing. Quit anytime.</p>
            <button class="plan__signup plan__signup--ideal" id="tier2Button">Subscribe for $9 /mo</button>          
            <p class="plan__notice"></p>
        </div>
        <div class="plan">
            <p class="plan__tier">Architect</p>
            <p class="plan__price">$14</p>
            <p class="plan__features-title">Features</p>
            <ul class="plan__features">
                <li class="plan__feature">One problem every day</li>
                <li class="plan__feature">Guided solutions every day</li>
                <li class="plan__feature">10 handpicked coding interviews weekly</li>
                <li class="plan__feature">No ads</li>
            </ul>
            <p class="plan__billing">Automatic monthly billing. Quit anytime.</p>
            <button class="plan__signup" id="tier3Button">Subscribe for $14 /mo</button>
            <p class="plan__notice"></p>
        </div>
    </div>
</div>

<div class="example">
    <h3 class="example__title">Sample Challenge + Guided Solution</h3>
    <div class="example__challenge"></div>
    <div class="example__solution"></div>
</div>

<div class="faq">
    <h3 class="faq__title">Frequently Asked Questions</h3>
    <ol class="faq__body">
        <li class="faq__item">
            <p class="faq__question">Why JavaScript?</p>
            <p class="faq__answer">
                We chose JavaScript beacuse of its potential use in different applications such as frontend or backend development. 
                Other than its versatility, its widespread adoption for commercial projects means there's a larger market 
                for developers than most languages. If you're interested in a similar service for Python developers, head on over to
                <a class="faq__link" href="www.dailycodingproblem.com">dailycodingproblems.com</a>
            </p>
        </li>
        <li class="faq__item">
            <p class="faq__question">Can I benefit from Daily JavaScript Problem?</p>
            <p class="faq__answer">
                If you're learning how to develop in JavaScript and/or looking for a remote position, this service is meant to
                assist you. It can also help developers with more experience maintain the skillset they have cultivated over the
                years through regular practice. If you've already secured employment, you can optionally unsubscribe from the interviews and 
                continue recieving daily problems an solutions by reaching out to us or you can unsubscribe from the service entirely.
            </p>
        </li>
        <li class="faq__item">
            <p class="faq__question">How does Daily JavaScript Problem differ from similar offerings?</p>
            <p class="faq__answer">
                One, we focus solely on JavaScript. We believe that by focusing on one language, we are able to 
                better address certain challenges faced by developers-in-training. Two, we curate by hand a 
                selection of remote jobs every week that you can apply for so you get to spend more of your time 
                on improving your skills. 
            </p>
        </li>
        <li class="faq__item">
            <p class="faq__question">Can't I just look for job interviews on my own?</p>
            <p class="faq__answer">
                You could, but you won't. Spending 1-2 hours everyday scanning job sites and trying to identify posts you can
                apply for is tiresome and you'll probably end up skipping a few days. It also adds up to 7-14 hours every week and 
                28-56 hours every month that you could spend on other activities. We do the work of curating job offerings by 
                hand and sending them to you every week to apply at your own leisure. All the offerings we send are for remote positions.
            </p>
        </li>
        <li class="faq__item">
            <p class="faq__question">Can I unsubscribe from Daily Javascript Problem whenever I choose?</p>
            <p class="faq__answer">
                Yes. A link to unsubscribe from the service is included at the end of every email we send you.
            </p>
        </li>
        
    </ol>
</div>

<footer class="footer">
    <div class="copyright">Daily Javascript Problem 2018</div>
    <div class="tos"><a href="./pages/tos.html">Terms Of Service</a></div>
    <div class="privacy"><a href="./pages/privacy.html">Privacy Statement</a></div>
</footer>

<form id="paymentForm" action="https://wt-c87a5eeb292d90f6b32cf269cc4b70ce-0.run.webtask.io/StripeBackend" method="POST" class="hidden" enctype="application/x-www-form-urlencoded">
    <input type="hidden" id="stripeToken" name="stripeToken"  />
    <input type="hidden" id="stripeEmail"  name="stripeEmail" />
    <input type="hidden" id="planAmount" name="planAmount" />
</form>

<div id="result" class="modal">
    <p>Will it work?</p>
</div>

<script src="scripts/prism.js"></script>
<script>
    var handler = StripeCheckout.configure ({
        key: 'pk_test_B71JqmlByKCwZFyJvUncyQcU',
        image: 'https://stripe.com/img/documentation/checkout/marketplace.png',
        locale: 'auto',
        token: function(token) {
            $('#stripeToken').val(token.id);
            $('#stripeEmail').val(token.email);
            var proxy = 'https://cors-anywhere.herokuapp.com/';
            var webtaskUrl = "https://wt-c87a5eeb292d90f6b32cf269cc4b70ce-0.sandbox.auth0-extend.com/StripeBackend";
            $.ajax({
                url : proxy + webtaskUrl,
                type : "POST",
                data : $("#paymentForm").serialize(),
                success : function (response){
                    if(response.results.status){
                        window.open('./pages/confirmation.html', '_self');
                    } else {
                        window.open('./pages/error.html', '_self');
                    };
                },
                error : function () {
                    window.open('./pages/error.html', '_self');
                }
            });
        }
    });

    $('#tier2Button').on('click', function(event) {
        document.getElementById('planAmount').value = 9;
        handler.open({
            name: 'Daily Javascript Problems',
            description: 'Developer Plan',
            amount: 900
        });
        e.preventDefault();
    });

    $('#tier3Button').on('click', function(event) {
        document.getElementById('planAmount').value = 14;
        handler.open({
            name: 'Daily Javascript Problems',
            description: 'Architect Plan',
            amount: 1400
        });
        e.preventDefault();
    });

    $('#tier1Button').on('click', function(){
        $('html, body').animate({
            scrollTop: ($('#home').offset().top)
        }), 200;
    });

    $('.signup__btn').on('click', function( event ){
        event.preventDefault();
        var eeUrl = 'https://api.elasticemail.com/v2/contact/add';
        $.post( eeUrl, {
            email : $('.signup__input').val(),
            publicAccountId : '199b5c02-90a4-4d21-a3e9-64d5b5870d4e',
            listName : 'Intern Plan'
        }, function( data ){
            alert('success');
            console.log( data );
            window.open('./pages/confirmation.html', '_self');
        }, 'json' )
        .fail( function() {
            alert('error');
            window.open('./pages/error.html', '_self');
        } );
    });

    window.on('popstate', function() {
        handler.close();
    });
</script>

</body>
</html>